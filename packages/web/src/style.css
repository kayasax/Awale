body, html { height:100%; }
body { margin:0; }
/* Global scenic background (image may be absent; gradients still give atmosphere) */
body { background:
	url('/african-bg.jpg') center/cover no-repeat fixed,
	radial-gradient(circle at 58% 34%, rgba(255,196,96,0.28), rgba(255,180,60,0) 45%),
	linear-gradient(120deg, #2a2d30 0%, #3a2d25 40%, #1e2126 85%),
	#1b1d1f; color:#e6e8ea; font-family: system-ui, sans-serif; }
.awale-container { max-width: 960px; margin: 3.5rem auto 2.5rem; padding: 0 1rem 2.5rem; position:relative; }
/* slight downward shift of top bar spacing */
header.topbar { margin-top:0; }
header { margin-bottom: 1rem; }
.status, .message, .winner { margin: .25rem 0; }
.board { display: grid; gap: .5rem; }
.row { display: flex; justify-content: space-between; }
.pit { width: 70px; height: 70px; border-radius: 12px; border: 2px solid #444; background:#222; color:#eee; display:flex; flex-direction:column; justify-content:center; align-items:center; font-size:14px; position:relative; transition: transform .25s ease, box-shadow .25s ease, background .35s ease; }
.pit.highlight { outline: 3px solid #4caf50; animation: pulse 1.8s infinite; }
.pit.last-move { box-shadow: 0 0 0 3px #ffb300; }
.pit.gain { animation: popGain 500ms ease; }
.pit.loss { animation: popLoss 500ms ease; }
.pit.captured { position:relative; }
.pit.captured::after, .pit.captured::before { content:""; position:absolute; inset:0; pointer-events:none; background:
	radial-gradient(circle at 20% 30%, #ffd54f, transparent 60%),
	radial-gradient(circle at 70% 40%, #fff9c4, transparent 55%),
	radial-gradient(circle at 40% 70%, #ffe082, transparent 60%);
	opacity:0; animation: sparkle 900ms ease forwards; mix-blend-mode:screen; }
.pit.captured::before { filter: blur(6px); }
.pit:not(:disabled):active { transform: scale(.9); }
.pit:disabled { opacity: .45; }
.pit .seeds { font-size: 20px; font-weight: 600; }
/* pit index removed visually */
.pit .delta { position:absolute; top:-10px; font-size:11px; font-weight:700; color:#66bb6a; animation: rise 900ms ease forwards; text-shadow:0 1px 2px #0008; }
.pit.loss .delta { color:#ef5350; }
/* Seed visuals */
.pit .seeds-list { position:absolute; inset:6px 6px 14px 6px; display:flex; flex-wrap:wrap; align-content:flex-start; gap:4px 4px; pointer-events:none; }
.pit .seed { width:12px; height:12px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #e9d39f, #9b7740); box-shadow:0 0 3px #000a; animation: seedPop .45s ease; }
.pit .seed.overflow { width:12px; height:12px; display:flex; align-items:center; justify-content:center; font-size:9px; font-weight:700; background:#364; color:#fff; }
.pit .seeds-count { font-size:13px; font-weight:600; position:absolute; top:-10px; left:-6px; background:#14171bd9; padding:2px 6px; border-radius:10px; letter-spacing:.5px; box-shadow:0 2px 6px #000e; z-index:5; border:1px solid #2d3338; -webkit-backdrop-filter:blur(2px); backdrop-filter:blur(2px); }
.pit.empty { opacity:.55; }

@keyframes seedPop { 0% { transform:scale(.3) rotate(15deg); opacity:0; } 60% { transform:scale(1.15); opacity:1; } 100% { transform:scale(1); } }

/* Hand indicator positioned via CSS variables */
.hand { position:absolute; left:var(--hand-x,-9999px); top:var(--hand-y,-9999px); width:40px; height:40px; margin:-20px 0 0 -20px; font-size:30px; filter: drop-shadow(0 3px 6px #000d) drop-shadow(0 0 4px #ffc400aa); pointer-events:none; animation: handPulse 1.6s ease-in-out infinite; z-index:10; }
@keyframes handPulse { 0%,100% { transform:scale(1); } 50% { transform:scale(1.15); } }
.actions button { margin-right: .5rem; }
/* Removed .board-text (debug) */
@media (max-width:600px){ .pit { width:50px; height:50px; } }

/* New layout polish */
.topbar { display:flex; align-items:flex-start; gap:1.5rem; flex-wrap:wrap; margin-bottom:1rem; }
.logo { margin:0; font-size:2rem; letter-spacing:.5px; }
.scorepanel { background:#1e1f22; padding:.7rem 1rem .75rem; border:1px solid #2e3136; border-radius:14px; display:flex; flex-direction:column; gap:.4rem; min-width:220px; box-shadow:0 4px 14px -6px #000a, 0 1px 0 #2a2d31 inset; }
.scores { display:flex; gap:.65rem; font-size:.8rem; font-weight:500; letter-spacing:.5px; }
.scores .score { background:#262a2f; padding:.25rem .55rem; border-radius:20px; display:flex; align-items:center; gap:.4rem; box-shadow:0 1px 2px #000a inset; }
.scores .score.you { color:#b9f6ca; }
.scores .score.ai { color:#ffe082; }
.scores .score strong { font-weight:600; font-size:1rem; color:#fff; }
.turn { font-size:.75rem; opacity:.85; letter-spacing:.5px; color:#d0d4da; }
.winner { font-weight:600; color:#ffec6b; text-shadow:0 0 6px #ffeb3b55; }
.msg { font-size:.75rem; color:#d6d9de; max-width:260px; line-height:1.25; }
.controls { display:flex; gap:.5rem; align-items:center; }
.btn { background:#2d2f33; color:#eee; border:1px solid #3d4147; padding:.5rem .9rem; border-radius:8px; font-size:.8rem; cursor:pointer; font-weight:500; letter-spacing:.5px; transition:background .25s, transform .15s, box-shadow .25s; }
.btn:hover:not(:disabled) { background:#3a3d42; }
.btn:active:not(:disabled) { transform:translateY(2px); }
.btn.mute { background:#1f2530; }
.btn.mute[data-state='off'] { background:#552222; color:#ffb3b3; }
.btn:focus-visible { outline:2px solid #ffb300; outline-offset:2px; }

.board-shell { position:relative; padding:1.2rem 1rem 1.5rem; background:linear-gradient(145deg,#1e2023,#24272b); border:1px solid #2f3439; border-radius:16px; box-shadow:0 6px 24px -8px #000d, 0 0 0 1px #262a2f inset; }
.board { gap:1rem; }
.row { gap:1rem; }

/* Adjust pits for panel */
.pit { background:linear-gradient(155deg,#363c42,#2c3136 58%); border-color:#77818a; box-shadow:inset 0 2px 3px #0009, 0 2px 3px #000b, 0 0 0 1px #23272b; position:relative; }
.row.ai .pit { background:linear-gradient(155deg,#40474e,#30363b 60%); border-color:#88939c; }
.row.ai .pit::before { background:radial-gradient(circle at 30% 25%, #4b545c, #31373c 70%); }
.pit::before { content:""; position:absolute; inset:2px; border-radius:9px; background:radial-gradient(circle at 30% 25%, #40474e, #2b3034 70%); pointer-events:none; opacity:.9; }
.pit.empty { background:linear-gradient(155deg,#3a3f44,#2d3033); }
.pit.empty::before { opacity:.5; }
.pit.highlight { outline-color:#4caf50; }
.pit.last-move { box-shadow:0 0 0 3px #ffb300, 0 0 10px -2px #ffb300aa; }
.pit.captured::after, .pit.captured::before { filter:brightness(1.1); }

@media (max-width:600px){
	.topbar { flex-direction:column; align-items:stretch; }
	.controls { flex-wrap:wrap; }
	.board-shell { padding:.8rem .6rem 1rem; }
	.scores { gap:.6rem; }
}


/* Accessibility utility */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); border:0; }

/* Animations */
@keyframes pulse { 0% { box-shadow:0 0 0 0 #4caf50; } 70% { box-shadow:0 0 0 10px #4caf5000; } 100% { box-shadow:0 0 0 0 #4caf5000; } }
@keyframes popGain { 0% { transform:scale(.9); background:#1b3a1b; } 60% { transform:scale(1.08); background:#234f23; } 100% { transform:scale(1); background:#222; } }
@keyframes popLoss { 0% { transform:scale(1.05); background:#3d1212; } 60% { transform:scale(.92); background:#341010; } 100% { transform:scale(1); background:#222; } }
@keyframes rise { 0% { opacity:0; transform: translateY(4px); } 50% { opacity:1; } 100% { opacity:0; transform: translateY(-10px); } }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes sparkle { 0% { opacity:0; transform:scale(.3) rotate(0deg); } 40% { opacity:1; transform:scale(1.05) rotate(25deg); } 70% { opacity:.9; } 100% { opacity:0; transform:scale(.4) rotate(60deg); } }

/* Wood Theme -------------------------------------------------------- */
.theme-wood .board-shell { 
	background:
		linear-gradient(145deg,#6d4925,#5a3c1d 55%, #4b3218 90%),
		repeating-linear-gradient(25deg, #0000 0 10px, #00000008 10px 20px);
	border:1px solid #3f2a15;
	box-shadow:0 10px 28px -10px #000e, 0 0 0 1px #855d33 inset, 0 0 0 2px #0002 inset;
}
.theme-wood .board { gap:1rem; }
.theme-wood .pit { 
	background:
		radial-gradient(circle at 30% 28%, #7a5430, #5c3d1f 65%),
		linear-gradient(160deg,#6d4825,#5b3b1d 70%);
	border-color:#8d6035;
	box-shadow: inset 0 3px 5px #0009, 0 2px 3px #000a, 0 0 0 1px #482c14, 0 0 8px -2px #000a;
	color:#f8efea;
}
.theme-wood .row.ai .pit { 
	background:
		radial-gradient(circle at 60% 25%, #845b34, #5f411f 65%),
		linear-gradient(155deg,#724c28,#5c3d1f 70%);
	border-color:#9a6a3b;
}
.theme-wood .pit::before { 
	background:radial-gradient(circle at 35% 30%, #8a6036, #5a3b1d 70%);
	opacity:.85;
	box-shadow:inset 0 1px 2px #0006, inset 0 0 0 1px #734c28aa;
}
.theme-wood .pit.empty { background:linear-gradient(155deg,#7a5430,#5c3d1f); }
.theme-wood .pit.empty::before { opacity:.4; }
.theme-wood .pit.last-move { box-shadow:0 0 0 3px #ffcc5a, 0 0 10px -2px #ffcc5aaa, inset 0 2px 4px #0008; }
.theme-wood .pit.highlight { outline-color:#53c256; }
.theme-wood .pit.captured::after, .theme-wood .pit.captured::before { filter:brightness(1.25) saturate(1.15); }
.theme-wood .seed { background:radial-gradient(circle at 30% 30%, #f3e0b5, #b1874a); }
.theme-wood .seeds-count { background:#362214dc; border-color:#7a5330; color:#ffe9d1; }
.theme-wood .scores .score { background:#714b27; box-shadow:0 1px 2px #0009 inset, 0 0 0 1px #55371c; }
.theme-wood .scores .score.you { color:#d6ffdc; }
.theme-wood .scores .score.ai { color:#ffe8b2; }
.theme-wood .scorepanel { background:#5c3d1f; border-color:#704a26; box-shadow:0 4px 14px -6px #000d, 0 0 0 1px #714a26 inset; }
.theme-wood .btn { background:#6b4624; border-color:#7a522d; color:#f7eee7; }
.theme-wood .btn:hover:not(:disabled) { background:#7a532e; }
.theme-wood .btn.mute[data-state='off'] { background:#7a2f2f; color:#ffd1d1; }
.theme-wood .btn:focus-visible { outline-color:#ffc342; }
.theme-wood .logo { color:#ffe9d4; text-shadow:0 3px 8px #000c, 0 0 6px #ffcf8c55; letter-spacing:1px; }
.theme-wood .msg { color:#f2e2d5; }
.theme-wood .turn { color:#ffe3c0; }
.theme-wood .winner { color:#ffe070; }

/* Maintain contrast for delta badges */
.theme-wood .pit .delta { text-shadow:0 1px 2px #2a1407; }

/* Wood theme now shares global body background; remove overlay */
.theme-wood { min-height:100vh; position:relative; color:#f8efe8; }
/* Dark theme logo contrast tweak */
.theme-dark .logo { color:#f0f3f5; text-shadow:0 2px 6px #000c; }
.theme-wood::before, .theme-dark::before { /* subtle vignette & horizon haze */
	content:""; position:fixed; inset:0; pointer-events:none;
	background:
		radial-gradient(circle at 50% 60%, rgba(255,207,120,0.08), rgba(255,190,90,0.02) 40%, rgba(0,0,0,0.4) 125%),
		linear-gradient(to top, rgba(52,27,18,0.55), rgba(52,27,18,0) 35%);
	mix-blend-mode:multiply; z-index:-1;
}
/* Optional repeating motif (tribal inspired) using a tiny SVG mask pattern */
.theme-wood::after, .theme-dark::after {
	content:""; position:fixed; inset:0; pointer-events:none; z-index:-1;
	background: repeating-linear-gradient(60deg, rgba(255,255,255,0.03) 0 22px, rgba(255,255,255,0.0) 22px 44px);
	mix-blend-mode:overlay; opacity:.35;
}

/* Slight darkening behind board for readability */
.theme-wood .board-shell { -webkit-backdrop-filter:blur(1px) brightness(.96); backdrop-filter:blur(1px) brightness(.96); }
.theme-dark .board-shell { -webkit-backdrop-filter:blur(2px) brightness(.9); backdrop-filter:blur(2px) brightness(.9); }

/* Footer */
footer.site-footer { text-align:center; font-size:.65rem; letter-spacing:.5px; opacity:.75; margin-top:1rem; padding:1rem 0 0; border-top:1px solid #ffffff12; }
footer.site-footer a { color:#ffc75d; text-decoration:none; }
footer.site-footer a:hover { text-decoration:underline; }

